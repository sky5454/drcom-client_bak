
				README
				------

Note: any comments please goto wheelz at <kernel.zeng@gmail.com>

This program is for linux with recent kernel versions(2.6~).
More detailed info refer to the Overview section below.

This program cannot run under *BSD, because we have a kernel module.
linux kernel modules are quite different with BSD kernel modules.
A specific BSD kernel module is needed to run under BSD.

This program is based on drcomsuite-0.1.12 and libdrcom-0.0-20050423-2
written by William Poetra Yoga Hadisoeseno. You could take this program
as a version of upgrading/bug fixing/feature enhancement, etc.

But please note that this program is not dependent on drcomsuite
and libdrcom, which means drcomsuite and libdrcom are not needed.

Please refer to README-old to get some information of drcom.
Please refer to THANKS to thank people contributed a lot for the program.

This program is covered by GPL v2. Please refer to COPYING.


CHANGES since 1.3.2
-------------------
 o  Added a configuration option "autologout", in /etc/drcom.conf
    a line of 
	autologout=1
    will make the program logout automaticly if no network access in
    2 minutes. autologout=0 will disable this feature.

 o  Make this program can accept local connect requests, 
    which means the local host can act as an server now.
    well, I have to say this is a bug fix, not a feature.


HACKS you can do :)
-----------------

There may be a problem, i.e., when this program is running,
Some people can not access internal network
(they have some strange internal network addresses).  

It should be configurable, of course. But for now it is not
available. Donot blame me, it is due to the old ugly codes.:) 

The exciting thing is that you can hack the code. Just edit
 kmod/except/common.c 
or 
 kmod/except/private.c
before you compile this program.

For example, if internal network is 10.98.0.0/255.255.0.0,
just simply add a line of 
||op1(op2(10.98.0.0),op2(255.255.0.0))

well, please be cautious, the leading '||' may not be needed 
if you put this line at the very beginning of the file. 
The two files are really ugly, aren't they?


0. Overview:
------------

drcomsuite and libdrcom cannot get compiled if your kernel version is recent,
because newer linux kernel makes inet_stream_ops and inet_dgram_ops const.

Begin with version 1.3, this program use security_ops to hijack 
security_ops->socket_post_create. So it requires that the kernel compiled
with CONFIG_SECURITY and CONFIG_SECURITY_NETWORK. I hope all distributions
open these two options.

There are also some corrections. The source codes of drcomsuite and libdrcom 
are a bit messy and ugly, and have some bugs. I've tried to clean a bit. 
Of course, What I have done is just another ugly hack. :) In the long run,
the whole framework should be rewritten.

Another feather added is the timeout. If there is no network access for 2
minutes, the program will logout automatically, for saving our money.



1. Compile:
-----------

$ make


2. Install:
-----------

run as root the following command.

# make install

... edit /etc/drcom.conf ...


3. Run:
-------

$ sudo drcomd
$ sudo drcomc login

...web surfing...

$ sudo drcomc logout

